{"mappings":"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","sources":["src/index.js"],"sourcesContent":["// import { pagination } from './pagination';\n\nconst productList = document.getElementById('productList');\nconst cart = document.getElementById('cart');\nconst cartList = document.getElementById('cartList');\nconst openCartBtn = document.getElementById('openBtn');\nconst closeCartBtn = document.getElementById('closeBtn');\nconst infoItem = document.getElementById('infoItem');\nconst information = document.getElementById('info');\n\n//відкриття та закриття корзини товарів\nopenCartBtn.addEventListener('click', openCartProduct);\ncloseCartBtn.addEventListener('click', closeCartProduct);\n\nfunction openCartProduct() {\n  cart.classList.remove('hidden');\n}\n\nfunction closeCartProduct() {\n  cart.classList.add('hidden');\n}\n\n//відкриття та закриття елементу з додатковою інформацією\ninfoItem.addEventListener('click', toggleInfo);\n\nfunction toggleInfo() {\n  if (information.classList.contains('hidden')) {\n    showInfo();\n  } else {\n    hideInfo();\n  }\n}\n\nfunction showInfo() {\n  information.classList.remove('hidden');\n}\n\nfunction hideInfo() {\n  information.classList.add('hidden');\n}\n\n//пагінація\nconst items = document.querySelectorAll('#pagination li');\n\nlet page = 1;\nlet productsPerPage = 24;\nconst totalNumberOfProducts = 461;\nconst totalPages = Math.ceil(totalNumberOfProducts / productsPerPage);\n\n// for (let item of items) {\n//   item.addEventListener('click', function () {\n//     this.classList.add('bg-black');\n\n//     let pageNumber = this.innerHTML;\n//     console.log(pageNumber);\n\n//     fetchProducts()\n//       .then(products => {\n//         renderProductsList(products.products);\n//         page = pageNumber;\n//       })\n//       .catch(error => console.log(error));\n//   });\n// }\n\n// Запит за продуктами\nfetchProducts()\n  .then(products => renderProductsList(products.products))\n  .catch(error => console.log(error));\n\nasync function fetchProducts() {\n  const params = new URLSearchParams({\n    limit: productsPerPage,\n    page: page,\n  });\n  const response = await fetch(\n    `https://voodoo-sandbox.myshopify.com/products.json?${params}`\n  );\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n  return await response.json();\n}\nfetchProducts();\n\n//рендер списку товарів\nfunction renderProductsList(products) {\n  const markup = products\n    .map(({ id, title, images, variants }) => {\n      const cutTitle = title.slice(0, 25);\n      const defaultSrc =\n        'https://cdn.shopify.com/s/files/1/0690/0075/7529/products/AAUvwnj0ICORVuxs41ODOvnhvedArLiSV20df7r8XBjEUQ_s900-c-k-c0x00ffffff-no-rj_d0d589c0-228a-46d7-9f63-8b7aa0416075.jpg?v=1670516962';\n      const imgSrc = images.length != 0 ? images[0].src : defaultSrc;\n      return `\n        <li class=\"relative product\" id=\"${id}\">\n          <img\n            width=\"300px\"\n            height=\"300px\"\n            src=\"${imgSrc}\"\n            alt=\"${cutTitle}\"\n          />\n          <span\n            class=\"absolute p-2 bg-black rounded font-spaceGrotesk font-normal text-lightSand text-xs start-5 top-5\"\n            >USED</span\n          >\n          <div class=\"flex items-center justify-between my-3\">\n            <div class=\"font-spaceGrotesk font-bold text-sm\">\n              <h3>${cutTitle}</h3>\n            <div class=\"flex gap-1\">\n              <p>${variants[0].price}</p>\n                <span>KR</span></div>\n            </div>\n            <div class=\"font-spaceGrotesk text-sm\">\n              <p class=\"font-medium\">Condition</p>\n              <p class=\"font-normal\">Slightly used</p>\n            </div>\n          </div>\n            <button id=\"addCartBtn\"\n              class=\"addCartBtn w-full py-4 bg-black font-spaceGrotesk font-bold text-lightSand rounded\"\n            >\n              ADD TO CART\n            </button>\n        </li>\n      `;\n    })\n    .join('');\n  productList.innerHTML = markup;\n}\n\n//додавання товарів в корзину та видалення товарів з корзини\nconst cartArray = [];\n\nexport const addToCart = () => {\n  productList.addEventListener('click', event => {\n    // console.log(event);\n    if (event.target.tagName.toLowerCase() == 'button') {\n      if (cartArray.length < 1) {\n        cartArray.push({\n          id: event.target.parentElement.id,\n          title:\n            event.target.parentElement.children[2].children[0].children[0]\n              .textContent,\n          imageSrc: event.target.parentElement.children[0].currentSrc,\n          amount: 1,\n          price:\n            event.target.parentElement.children[2].children[0].children[1]\n              .children[0].textContent,\n        });\n      } else {\n        const existedProduct = cartArray.find(\n          el => el.id === event.target.parentElement.id\n        );\n        if (existedProduct) {\n          existedProduct.amount++;\n        } else {\n          cartArray.push({\n            id: event.target.parentElement.id,\n            title:\n              event.target.parentElement.children[2].children[0].children[0]\n                .textContent,\n            imageSrc: event.target.parentElement.children[0].currentSrc,\n            amount: 1,\n            price:\n              event.target.parentElement.children[2].children[0].children[1]\n                .children[0].textContent,\n            // price: parseFloat(\n            //   event.target.parentElement.parentElement.children[2].children[0]\n            //     .children[1].children[0].textContent\n            // ),\n          });\n        }\n      }\n      //   console.log(cartArray);\n      renderCartList(cartArray);\n\n      cartArray.forEach(product => {\n        updateCart(product);\n      });\n\n      updateTotalPrice();\n    }\n  });\n};\n\nconst updateCart = product => {\n  const productCartItem = cartList.children[0];\n\n  if (productCartItem.id === product.id) {\n    updateProduct(productCartItem, product);\n  }\n\n  //   const productCartItem = cartList.querySelector(`[data-id=\"${product.id}\"]`);\n\n  //   console.log(productCartItem.dataset.id);\n  //   console.log(product.id);\n\n  //   if (productCartItem.dataset.id === product.id) {\n  //     updateProduct(productCartItem, product);\n  //   }\n};\n\nexport const updateProduct = (element, product) => {\n  const priceCartProduct = document.getElementById('price');\n  const amountOfProduct = document.getElementById('amountOfProduct');\n\n  priceCartProduct.textContent = product.amount * product.price;\n  amountOfProduct.textContent = product.amount;\n};\n\nconst updateTotalPrice = () => {\n  const totalPriceElement = document.getElementById('totalPrice');\n\n  const totalPrice = cartArray.reduce((result, cartItem) => {\n    result += cartItem.amount * cartItem.price;\n    return result;\n  }, 0);\n  totalPriceElement.innerHTML = totalPrice.toFixed(2) + ' KR.';\n};\n\naddToCart();\n\nfunction cartProductistener() {\n  cart.addEventListener('click', event => {\n    // console.log(event);\n    if (\n      event.target.id === 'removeBtn' ||\n      event.target.id === 'decreaseBtn' ||\n      event.target.id === 'increaseBtn'\n    ) {\n      const productCartElement = event.target.closest('.cartItem');\n      console.log(productCartElement);\n      console.log(productCartElement.id);\n\n      const productCartId = productCartElement.id;\n      if (productCartId) {\n        const productElementIndex = cartArray.findIndex(\n          el => el.id === productCartId\n        );\n        if (event.target.id === 'decreaseBtn') {\n          if (cartArray[productElementIndex].amount === 1) {\n            productCartElement.parentElement.removeChild(productCartElement);\n            cartArray.splice(productElementIndex, 1);\n          } else {\n            cartArray[productElementIndex].amount--;\n            updateCart(cartArray[productElementIndex]);\n          }\n        }\n        if (event.target.id === 'increaseBtn') {\n          cartArray[productElementIndex].amount++;\n          updateCart(cartArray[productElementIndex]);\n        }\n        if (event.target.id === 'removeBtn') {\n          productCartElement.parentElement.removeChild(productCartElement);\n          cartArray.splice(productElementIndex, 1);\n        }\n      }\n      updateTotalPrice();\n    }\n  });\n}\n\ncartProductistener();\n\n//рендер списку товарів в коризині\nconst renderCartList = products => {\n  const markup = products\n    .map(({ id, title, imageSrc, price }) => {\n      return `\n          <li class=\"cartItem flex justify-between\" id=\"${id}\">\n    <a class=\"flex gap-5\">\n      <img\n        width=\"74px\"\n        height=\"74px\"\n        src=\"${imageSrc}\"\n        alt=\"${title}\"\n      />\n      <div\n        class=\"flex flex-col gap-3 font-spaceGrotesk font-bold text-sm text-lightSand\"\n      >\n        <p>${title}</p>\n          <div class=\"flex gap-1\">\n              <p id=\"price\">${price}</p>\n              <span>KR</span>\n          </div>\n\n      <div class=\"flex gap-3\">\n        <button id=\"decreaseBtn\"> - </button>\n        <p id=\"amountOfProduct\"> 1 </p>\n        <button id=\"increaseBtn\"> + </button>\n          </div>\n      </div>\n          </div>\n    </a>\n    <button id=\"removeBtn\" class=\"py-1 bg-lightSand font-spaceGrotesk font-bold text-black rounded\"> X\n    </button>\n  </li>\n        `;\n    })\n    .join('');\n  cartList.innerHTML = markup;\n};\n"],"names":["$1f0dc3b9307be026$var$productList","document","getElementById","$1f0dc3b9307be026$var$cart","$1f0dc3b9307be026$var$cartList","$1f0dc3b9307be026$var$openCartBtn","$1f0dc3b9307be026$var$closeCartBtn","$1f0dc3b9307be026$var$infoItem","$1f0dc3b9307be026$var$information","addEventListener","classList","remove","add","contains","querySelectorAll","Math","ceil","async","$1f0dc3b9307be026$var$fetchProducts","params","URLSearchParams","limit","page","response","fetch","ok","Error","status","json","then","products","markup","map","id","title","images","variants","cutTitle","slice","defaultSrc","length","src","price","join","innerHTML","$1f0dc3b9307be026$var$renderProductsList","catch","error","console","log","$1f0dc3b9307be026$var$cartArray","$1f0dc3b9307be026$var$updateCart","product","productCartItem","children","$1f0dc3b9307be026$export$8d590d0c8872145e","element","priceCartProduct","amountOfProduct","textContent","amount","$1f0dc3b9307be026$var$updateTotalPrice","totalPriceElement","totalPrice","reduce","result","cartItem","toFixed","event","target","tagName","toLowerCase","push","parentElement","imageSrc","currentSrc","existedProduct","find","el","$1f0dc3b9307be026$var$renderCartList","forEach","productCartElement","closest","productCartId","productElementIndex","findIndex","removeChild","splice"],"version":3,"file":"index.8992303c.js.map"}