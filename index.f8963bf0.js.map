{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const productList = document.getElementById('productList');\nconst cart = document.getElementById('cart');\nconst cartList = document.getElementById('cartList');\nconst openCartBtn = document.getElementById('openBtn');\nconst closeCartBtn = document.getElementById('closeBtn');\nconst infoItem = document.getElementById('infoItem');\nconst information = document.getElementById('info');\n\n//відкриття та закриття корзини товарів\nopenCartBtn.addEventListener('click', openCartProduct);\ncloseCartBtn.addEventListener('click', closeCartProduct);\n\nfunction openCartProduct() {\n  cart.classList.remove('hidden');\n}\n\nfunction closeCartProduct() {\n  cart.classList.add('hidden');\n}\n\n//відкриття та закриття елементу з додатковою інформацією\ninfoItem.addEventListener('click', toggleInfo);\n\nfunction toggleInfo() {\n  if (information.classList.contains('hidden')) {\n    showInfo();\n  } else {\n    hideInfo();\n  }\n}\n\nfunction showInfo() {\n  information.classList.remove('hidden');\n}\n\nfunction hideInfo() {\n  information.classList.add('hidden');\n}\n\n//пагінація\nlet productsPerPage = 24;\nconst totalNumberOfProducts = 461;\nconst totalPages = Math.ceil(totalNumberOfProducts / productsPerPage);\n\ndocument.addEventListener('click', e => {\n  if (e.target.getAttribute('action-type') === 'pagination-btn') {\n    fetchProducts(e.target.value)\n      .then(products => {\n        renderProductsList(products.products);\n      })\n      .catch(error => console.log(error));\n  }\n});\n\n// Запит за продуктами\nfetchProducts(1)\n  .then(products => renderProductsList(products.products))\n  .catch(error => console.log(error));\n\nasync function fetchProducts(page) {\n  const params = new URLSearchParams({\n    limit: productsPerPage,\n    page: page,\n  });\n  const response = await fetch(\n    `https://voodoo-sandbox.myshopify.com/products.json?${params}`\n  );\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n  return await response.json();\n}\n// fetchProducts();\n\n//рендер списку товарів\nfunction renderProductsList(products) {\n  const markup = products\n    .map(({ id, title, images, variants }) => {\n      const cutTitle = title.slice(0, 25);\n      const defaultSrc =\n        'https://cdn.shopify.com/s/files/1/0690/0075/7529/products/AAUvwnj0ICORVuxs41ODOvnhvedArLiSV20df7r8XBjEUQ_s900-c-k-c0x00ffffff-no-rj_d0d589c0-228a-46d7-9f63-8b7aa0416075.jpg?v=1670516962';\n      const imgSrc = images.length != 0 ? images[0].src : defaultSrc;\n      return `\n        <li class=\"relative product\" id=\"${id}\">\n          <img\n            width=\"300px\"\n            height=\"300px\"\n            src=\"${imgSrc}\"\n            alt=\"${cutTitle}\"\n          />\n          <span\n            class=\"absolute p-2 bg-black rounded font-spaceGrotesk font-normal text-lightSand text-xs start-5 top-5\"\n            >USED</span\n          >\n          <div class=\"flex items-center justify-between my-3\">\n            <div class=\"font-spaceGrotesk font-bold text-sm\">\n              <h3>${cutTitle}</h3>\n            <div class=\"flex gap-1\">\n              <p>${variants[0].price}</p>\n                <span>KR</span></div>\n            </div>\n            <div class=\"font-spaceGrotesk text-sm\">\n              <p class=\"font-medium\">Condition</p>\n              <p class=\"font-normal\">Slightly used</p>\n            </div>\n          </div>\n            <button id=\"addCartBtn\"\n              class=\"addCartBtn w-full py-4 bg-black font-spaceGrotesk font-bold text-lightSand rounded\"\n            >\n              ADD TO CART\n            </button>\n        </li>\n      `;\n    })\n    .join('');\n  productList.innerHTML = markup;\n}\n\n//додавання товарів в корзину та видалення товарів з корзини\nconst cartArray = [];\n\nexport const addToCart = () => {\n  productList.addEventListener('click', event => {\n    // console.log(event);\n    if (event.target.tagName.toLowerCase() == 'button') {\n      if (cartArray.length < 1) {\n        cartArray.push({\n          id: event.target.parentElement.id,\n          title:\n            event.target.parentElement.children[2].children[0].children[0]\n              .textContent,\n          imageSrc: event.target.parentElement.children[0].currentSrc,\n          amount: 1,\n          price:\n            event.target.parentElement.children[2].children[0].children[1]\n              .children[0].textContent,\n        });\n      } else {\n        const existedProduct = cartArray.find(\n          el => el.id === event.target.parentElement.id\n        );\n        if (existedProduct) {\n          existedProduct.amount++;\n        } else {\n          cartArray.push({\n            id: event.target.parentElement.id,\n            title:\n              event.target.parentElement.children[2].children[0].children[0]\n                .textContent,\n            imageSrc: event.target.parentElement.children[0].currentSrc,\n            amount: 1,\n            price:\n              event.target.parentElement.children[2].children[0].children[1]\n                .children[0].textContent,\n            // price: parseFloat(\n            //   event.target.parentElement.parentElement.children[2].children[0]\n            //     .children[1].children[0].textContent\n            // ),\n          });\n        }\n      }\n      //   console.log(cartArray);\n      renderCartList(cartArray);\n\n      cartArray.forEach(product => {\n        updateCart(product);\n      });\n\n      updateTotalPrice();\n    }\n  });\n};\n\nconst updateCart = product => {\n  for (const item of cartArray) {\n    if (item.id === product.id) {\n      updateProduct(product);\n    }\n  }\n};\n\nexport const updateProduct = product => {\n  const priceCartProduct = document.getElementById('price');\n  const amountOfProduct = document.getElementById('amountOfProduct');\n\n  priceCartProduct.textContent = product.amount * product.price;\n  amountOfProduct.textContent = product.amount;\n};\n\nconst updateTotalPrice = () => {\n  const totalPriceElement = document.getElementById('totalPrice');\n\n  const totalPrice = cartArray.reduce((result, cartItem) => {\n    result += cartItem.amount * cartItem.price;\n    return result;\n  }, 0);\n  totalPriceElement.innerHTML = totalPrice.toFixed(2) + ' KR.';\n};\n\naddToCart();\n\nfunction cartProductistener() {\n  cart.addEventListener('click', event => {\n    // console.log(event);\n    if (\n      event.target.id === 'removeBtn' ||\n      event.target.id === 'decreaseBtn' ||\n      event.target.id === 'increaseBtn'\n    ) {\n      const productCartElement = event.target.closest('.cartItem');\n      console.log(productCartElement);\n      console.log(productCartElement.id);\n\n      const productCartId = productCartElement.id;\n      if (productCartId) {\n        const productElementIndex = cartArray.findIndex(\n          el => el.id === productCartId\n        );\n        if (event.target.id === 'decreaseBtn') {\n          if (cartArray[productElementIndex].amount === 1) {\n            productCartElement.parentElement.removeChild(productCartElement);\n            cartArray.splice(productElementIndex, 1);\n          } else {\n            cartArray[productElementIndex].amount--;\n            updateCart(cartArray[productElementIndex]);\n          }\n        }\n        if (event.target.id === 'increaseBtn') {\n          cartArray[productElementIndex].amount++;\n          updateCart(cartArray[productElementIndex]);\n        }\n        if (event.target.id === 'removeBtn') {\n          productCartElement.parentElement.removeChild(productCartElement);\n          cartArray.splice(productElementIndex, 1);\n        }\n      }\n      updateTotalPrice();\n    }\n  });\n}\n\ncartProductistener();\n\n//рендер списку товарів в коризині\nconst renderCartList = products => {\n  const markup = products\n    .map(({ id, title, imageSrc, price }) => {\n      return `\n          <li class=\"cartItem flex justify-between\" id=\"${id}\">\n    <a class=\"flex gap-5\">\n      <img\n        width=\"74px\"\n        height=\"74px\"\n        src=\"${imageSrc}\"\n        alt=\"${title}\"\n      />\n      <div\n        class=\"flex flex-col gap-3 font-spaceGrotesk font-bold text-sm text-lightSand\"\n      >\n        <p>${title}</p>\n          <div class=\"flex gap-1\">\n              <p id=\"price\">${price}</p>\n              <span>KR</span>\n          </div>\n\n      <div class=\"flex gap-3\">\n        <button id=\"decreaseBtn\"> - </button>\n        <p id=\"amountOfProduct\"> 1 </p>\n        <button id=\"increaseBtn\"> + </button>\n          </div>\n      </div>\n          </div>\n    </a>\n        <svg id=\"removeBtn\" class=\"cursor-pointer\"\nxmlns=\"http://www.w3.org/2000/svg\"\nwidth=\"20\"\nheight=\"20\"\nviewBox=\"0 0 20 20\"\nfill=\"none\"\n>\n<path\n  d=\"M5 2V0H15V2H20V4H18V19C18 19.2652 17.8946 19.5196 17.7071 19.7071C17.5196 19.8946 17.2652 20 17 20H3C2.73478 20 2.48043 19.8946 2.29289 19.7071C2.10536 19.5196 2 19.2652 2 19V4H0V2H5ZM4 4V18H16V4H4ZM7 7H9V15H7V7ZM11 7H13V15H11V7Z\"\n  fill=\"#FCF7E6\"\n/>\n</svg>\n  </li>\n        `;\n    })\n    .join('');\n  cartList.innerHTML = markup;\n};\n"],"names":["$1f0dc3b9307be026$var$productList","document","getElementById","$1f0dc3b9307be026$var$cart","$1f0dc3b9307be026$var$cartList","$1f0dc3b9307be026$var$openCartBtn","$1f0dc3b9307be026$var$closeCartBtn","$1f0dc3b9307be026$var$infoItem","$1f0dc3b9307be026$var$information","addEventListener","classList","remove","add","contains","Math","ceil","async","$1f0dc3b9307be026$var$fetchProducts","page","params","URLSearchParams","limit","response","fetch","ok","Error","status","json","$1f0dc3b9307be026$var$renderProductsList","products","markup","map","id","title","images","variants","cutTitle","slice","length","src","price","join","innerHTML","e","target","getAttribute","value","then","catch","error","console","log","$1f0dc3b9307be026$var$cartArray","$1f0dc3b9307be026$var$updateCart","product","item","$1f0dc3b9307be026$export$8d590d0c8872145e","priceCartProduct","amountOfProduct","textContent","amount","$1f0dc3b9307be026$var$updateTotalPrice","totalPriceElement","totalPrice","reduce","result","cartItem","toFixed","event","tagName","toLowerCase","push","parentElement","children","imageSrc","currentSrc","existedProduct","find","el","$1f0dc3b9307be026$var$renderCartList","forEach","productCartElement","closest","productCartId","productElementIndex","findIndex","removeChild","splice"],"version":3,"file":"index.f8963bf0.js.map"}